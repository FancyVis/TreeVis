<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Tree Data Visualizer</title>
  <link rel="stylesheet" href="style.css" />

  <!-- Pyodide: replace version with the one you want from the official docs if needed -->
  <script
    src="https://cdn.jsdelivr.net/pyodide/v0.26.4/full/pyodide.js"
  ></script>

  <script src="script.js" defer></script>
</head>
<body>
  <header class="top-bar">
    <h1 data-i18n-key="app_title">Tree Data Visualizer</h1>
    <button id="lang-toggle" class="lang-toggle" data-i18n-key="lang_toggle">
      中文 / EN
    </button>
  </header>

  <main class="container">
    <section class="panel">
      <h2 data-i18n-key="data_section_title">1. Upload & Preview Data</h2>

      <div class="form-row">
        <label for="file-input">
          <span data-i18n-key="upload_label">Upload CSV file</span>
        </label>
        <input type="file" id="file-input" accept=".csv" />
      </div>

      <div id="status" class="status"></div>

      <h3 data-i18n-key="preview_title">Preview</h3>
      <div id="preview" class="preview-table"></div>
    </section>

    <section class="panel">
        <h2 data-i18n-key="chart_section_title">2. Configure Chart</h2>

        <div class="form-row">
            <label for="label-column">
            <span data-i18n-key="choose_label_column">Label column</span>
            </label>
            <select id="label-column"></select>
        </div>

        <div class="form-row">
            <label for="value-column">
            <span data-i18n-key="choose_value_column">Value column</span>
            </label>
            <select id="value-column"></select>
        </div>

        <!-- Color column selector -->
        <div class="form-row">
            <label for="color-column">
            <span data-i18n-key="choose_color_column">Color column (optional)</span>
            </label>
            <select id="color-column">
            <option value="" data-i18n-key="color_none_option">
                Default colors
            </option>
            </select>
        </div>

        <div class="form-row">
            <label for="color-mode">
                <span data-i18n-key="color_mapping_mode">Color mapping</span>
            </label>
            <select id="color-mode">
                <option value="direct" data-i18n-key="color_mode_direct">
                Use values as colors
                </option>
                <option value="numeric" data-i18n-key="color_mode_numeric">
                Numeric → gradient
                </option>
                <option value="binary" data-i18n-key="color_mode_binary">
                Boolean / binary
                </option>
            </select>
        </div>

        <div class="form-row">
            <label for="base-color">
                <span data-i18n-key="base_color_label">Base color</span>
            </label>
            <input type="color" id="base-color" value="#ffd700" />
        </div>

        <div class="form-row">
            <label for="chart-type">
            <span data-i18n-key="chart_type">Chart type</span>
            </label>
            <select id="chart-type">
            <option value="bar" data-i18n-key="chart_type_bar">Bar chart</option>
            <option value="treemap" data-i18n-key="chart_type_treemap">
                Treemap
            </option>
            </select>
        </div>

        <button id="generate-chart" class="primary-button" disabled
            data-i18n-key="generate_button">
            Generate chart
        </button>
    </section>


    <section class="panel">
      <h2 data-i18n-key="result_section_title">3. Result</h2>
      <div id="chart-container" class="chart-container">
        <img id="chart-image" alt="Chart will appear here" />
      </div>
      <button id="download-chart" class="secondary-button" disabled
        data-i18n-key="download_button">
        Download chart
      </button>
    </section>
  </main>
</body>
</html>
